<!DOCTYPE html>
<html>

<head>
  <title>Create New Post</title>
</head>

<body>
  <form>
    <label for="title">Title:</label>
    <input type="text" id="todo-title" name="title" required>
    <br>
    <label for="completed">Flag Completed:</label>
    <input type="checkbox" id="todo-completed" name="completed">
    <br>
    <button type="submit">Create Post</button>
  </form>

  <script>
    const input = document.querySelector('#todo-title');
    const checkboxInput = document.querySelector('#todo-completed');
    const form = document.querySelector('form');

    const createPost = async () => {
      const newPost = {
        title: input.value,
        completed: checkboxInput.checked
      }

      try {
        const response = await fetch('https://jsonplaceholder.typicode.com/posts', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(newPost),
        });

        const data = await response.json();
        console.log('Nuovo post creato', data);
      } catch (err) {
        console.error(err);
      }
    }

    form.addEventListener('submit', (event) => {
      event.preventDefault();
      createPost();
    })
  </script>
</body>

</html>

<!-- /* document.querySelector('#postForm').addEventListener('submit', async (e) => {
  e.preventDefault();

  const $title = document.querySelector('#title');
  const $checkboxInput = document.querySelector('#completed');

  const newPost = {
    title: $title.value,
    completed: $checkboxInput.completed
  }

  try {
    const response = await fetch('https://jsonplaceholder.typicode.com/posts', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(newPost),
    });

    if (!response.ok) {
      throw new Error('Failed to create a new post.');
    }

    const responseData = await response.json();

    console.log('New post created:', responseData);
  } catch (err) {
    console.log(err.message);
  }
}) */ -->